<!-- pages/library/index.wxml -->
<view class="page-container">
  <!-- è£…é¥°å…ƒç´  -->
  <view class="star-decoration star-1"></view>
  <view class="star-decoration star-2"></view>
  <view class="star-decoration star-3"></view>
  <view class="star-decoration star-4"></view>
  <view class="cloud-decoration cloud-1"></view>
  <view class="cloud-decoration cloud-2"></view>
  <!-- å¤´éƒ¨åŒºåŸŸ -->
  <view class="page-header">
    <view class="header-bg-1"></view>
    <view class="header-bg-2"></view>
    
    <view class="header-content">
      <text class="header-title">ğŸ“š ä¹¦åŸ</text>
      <text class="header-subtitle">æ¢ç´¢æ— é™çš„é˜…è¯»ä¸–ç•Œ</text>
    </view>
  </view>

  <view class="main-content">
    <!-- æœç´¢æ  -->
    <view class="search-wrapper">
      <view class="search-bar">
        <image class="search-icon" src="https://img.icons8.com/ios-filled/50/A855F7/search.png" mode="aspectFit"></image>
        <input class="search-input" placeholder="ğŸ” æœç´¢ä¹¦åŸ..." placeholder-class="search-placeholder" />
        <view class="filter-btn">
          <image class="filter-icon" src="https://img.icons8.com/ios-filled/50/FFFFFF/filter.png" mode="aspectFit"></image>
        </view>
      </view>
    </view>

    <!-- åˆ†ç±»æ ‡ç­¾ -->
    <scroll-view class="categories-scroll" scroll-x="true" enhanced="true" show-scrollbar="false">
      <view class="categories">
        <view class="category-btn active" wx:for="{{categories}}" wx:key="id" 
              bindtap="onCategoryClick" data-id="{{item.id}}"
              class="category-btn {{activeCategory === item.id ? 'active' : ''}}">
          <text class="category-name">{{item.name}}</text>
          <view class="category-badge">
            <text>{{item.count}}</text>
          </view>
        </view>
      </view>
    </scroll-view>

    <!-- ä¹¦ç±åˆ—è¡¨ -->
    <view class="books-list">
      <view class="book-card" wx:for="{{books}}" wx:key="id" 
            bindtap="navigateToDetail" data-id="{{item.id}}">
        <view class="book-cover-container">
          <image class="book-cover" src="{{item.cover}}" mode="aspectFill"></image>
        </view>
        <view class="book-info">
          <view class="book-header">
            <text class="book-title">{{item.title}}</text>
            <view class="book-tag {{item.tagClass}}">
              <text>{{item.tag}}</text>
            </view>
          </view>
          <text class="book-author">{{item.author}}</text>
          <view class="book-footer">
            <view class="book-rating">
              <image wx:for="{{item.rating}}" wx:for-item="star" wx:key="*this" 
                     src="https://img.icons8.com/ios-filled/50/FFD700/star.png" mode="aspectFit"></image>
            </view>
            <text class="book-readers">{{item.readers}} é˜…è¯»</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨å ä½ -->
  <view class="bottom-space"></view>

  <!-- åº•éƒ¨å¯¼èˆª -->
  <view class="bottom-nav">
    <view class="nav-items">
      <view class="nav-item {{activeTab === 'customize' ? 'active' : ''}}" bindtap="switchTab" data-url="/pages/customize/index">
        <image class="nav-icon {{activeTab === 'customize' ? 'nav-icon-active' : ''}}" src="https://img.icons8.com/ios-filled/50/{{activeTab === 'customize' ? '7C3AED' : 'FFFFFF'}}/star.png" mode="aspectFit"></image>
        <text class="nav-text {{activeTab === 'customize' ? 'nav-text-active' : ''}}">å®šåˆ¶</text>
      </view>
      <view class="nav-item {{activeTab === 'library' ? 'active' : ''}}" bindtap="switchTab" data-url="/pages/library/index">
        <image class="nav-icon {{activeTab === 'library' ? 'nav-icon-active' : ''}}" src="https://img.icons8.com/ios-filled/50/{{activeTab === 'library' ? '7C3AED' : 'FFFFFF'}}/library.png" mode="aspectFit"></image>
        <text class="nav-text {{activeTab === 'library' ? 'nav-text-active' : ''}}">ä¹¦åŸ</text>
      </view>
      <view class="nav-item nav-item-center {{activeTab === 'index' ? 'active' : ''}}" bindtap="switchTab" data-url="/pages/index/index">
        <view class="nav-center-btn">
          <image class="nav-icon-center" src="https://img.icons8.com/ios-filled/50/FFFFFF/home.png" mode="aspectFit"></image>
        </view>
        <text class="nav-text {{activeTab === 'index' ? 'nav-text-active' : ''}}">é¦–é¡µ</text>
      </view>
      <view class="nav-item {{activeTab === 'learn' ? 'active' : ''}}" bindtap="switchTab" data-url="/pages/learn/index">
        <image class="nav-icon {{activeTab === 'learn' ? 'nav-icon-active' : ''}}" src="https://img.icons8.com/ios-filled/50/{{activeTab === 'learn' ? '7C3AED' : 'FFFFFF'}}/graduation-cap.png" mode="aspectFit"></image>
        <text class="nav-text {{activeTab === 'learn' ? 'nav-text-active' : ''}}">å­¦ä¹ </text>
      </view>
      <view class="nav-item {{activeTab === 'profile' ? 'active' : ''}}" bindtap="switchTab" data-url="/pages/profile/index">
        <image class="nav-icon {{activeTab === 'profile' ? 'nav-icon-active' : ''}}" src="https://img.icons8.com/ios-filled/50/{{activeTab === 'profile' ? '7C3AED' : 'FFFFFF'}}/user.png" mode="aspectFit"></image>
        <text class="nav-text {{activeTab === 'profile' ? 'nav-text-active' : ''}}">ä¸ªäºº</text>
      </view>
    </view>
  </view>
</view>
